{% extends "base.html" %}
{% block title %}Watch Â· GroupMe GUI{% endblock %}
{% block content %}
  <h1>Watch (live events)</h1>
  <div id="log" class="card" style="max-height:60vh; overflow:auto;"></div>
  <script>
    const log = document.getElementById('log');
    function addLine(t) {
      const div = document.createElement('div');
      div.className = 'mono';
      div.textContent = t;
      log.appendChild(div);
      log.scrollTop = log.scrollHeight;
    }
    const es = new EventSource('/watch/stream');
    es.onmessage = (e) => {
      addLine(e.data);
    };
    es.onerror = (e) => {
      addLine('[[error]]');
    };
  </script>
{% endblock %}
